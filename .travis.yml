language: cpp
os:
  - osx
osx_image: xcode8.2
xcode_project: pixelpunch.xcodeproj
osx_sdk: macosx10.12
compiler:
  - clang
  - gcc
before_install:
  - brew update
  - brew install Caskroom/cask/cinder
script: xcodebuild clean build -project xcode/pixelpunch.xcodeproj OTHER_LDFLAGS="/Applications/cinder_0.9.0_mac/lib/libcinder_d.a
  /Applications/cinder_0.9.0_mac/lib/libcinder.a" HEADER_SEARCH_PATHS="/Applications/cinder_0.9.0_mac/include"  -configuration
  “Build” -scheme pixelpunch
after_success:
  - echo -e "Starting to tag commit.\n"
  - git config --global user.email "travis@travis-ci.org"
  - git config --global user.name "Travis CI"
  - export GIT_TAG=build-$TRAVIS_BRANCH-$(date -u "+%Y-%m-%d-%H-%M-%S")-$TRAVIS_BUILD_NUMBER
  - git tag $GIT_TAG -a -m "Generated tag from TravisCI build $TRAVIS_BUILD_NUMBER"
  - git push origin $GIT_TAG
before_deploy:
  - cd /Users/travis/build/CandyFace/pixelpunch/xcode/build
  - zip -r "pixelpunch_mac.zip" Release/
deploy:
  provider: releases
  file: xcode/build/Release/pixelpunch_mac.zip
  skip_cleanup: true
  draft: true
  on:
    tags: true
    all_branches: true
env:
  global:
    secure: euGkJMldfcKJiPPQ/svCPANrPqUSxrpun0i3QkWJQ4VrxzZrs5jms3G8H2VBxaiDxOmuwbFjNfLmh0ItTjPZeZFbStw3BU32fy2HMuQH+I46tGtnIxfLaRP7/8BUmjdWsHLQ9SSatv+Z797oKx8fjZWiXgPf9WoHTN3WqHYAdW575A99t9zEPIkM7MBvL/yr8wvfUPxX9IpF1zcK/YKuAwzK2xa89Vs9vEJGZ+CSZrtGyOeQtrFJb4Q1qR/XHau0DNAqRBcYVe20tZHLI/nt2OlOfmIIjRkXvOHzmACQkcLIU/jfII5K5cxJrN0ee7vVfdF5WxIBoeQHV0tKUGAyqfzohE6boDzct7HAo9GrX2QsyEYd1dcCdKdQPcCZjPM50EnP/1StBajzN+0pqw/EBMnPtV+pdQsZaggcplzHBSUz3vXTwuyxyV7/5WaBPma5mb3IfW2hSVhJXrSuR6UmCDbwC8qux4beG54qIcG6z1NidpAFTnQ5jpW8ABHwy5RK2FeTvIJZ4l7X3SMmghAOdtu0Wj1xqQi5+0oqMW0mUeE7e9RjiAq02IrWBqdQ2OVThmy56hDV+QsY3tlj8JvgF7TUezrvfSEI7VpwBdBCSmMY4VmK7rmfrTZY7NPP+O5kIslD+UBeVeo7Nig0rEiwXGSSR/OicTAQZN9XgWdlB+8=
